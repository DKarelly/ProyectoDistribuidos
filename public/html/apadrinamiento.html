<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administrador de Apadrinamiento</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="files/casitaicon.png">
    <link rel="shortcut icon" type="image/png" href="files/casitaicon.png">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Tu hoja de estilos global -->
    <link rel="stylesheet" href="CSS/estilos.css">
    <link rel="stylesheet" href="CSS/EstilosUsuarios.css">
    <link rel="stylesheet" href="CSS/EstilosEspecieRaza.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
<!-- si se preciona el boton aceptar se abre el modal registrar, se cargan los datos en donde corresponde, pero agrega un input en donde se cargue el id de la solicitud. este input aparece si se preciona el boton aceptar -->
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold text-danger" href="HUELLA FELIZ.html">
                <img src="files/iconomain.jpg" alt="Huella Feliz" width="32" height="32" class="me-2 d-inline-block">
                HUELLA FELIZ
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="adopciones.html">Adopciones</a></li>
                    <li class="nav-item"><a class="nav-link" href="donaciones.html">Donaciones</a></li>
                    <li class="nav-item"><a class="nav-link" href="blog.html">Blog</a></li>
                    <li class="nav-item"><a class="nav-link" href="reportar.html">Reportar</a></li>
                    <li class="nav-item"><a class="nav-link" href="acercaDe.html">Acerca de</a></li>

                    <li class="nav-item"><a class="nav-link bi bi-speedometer2" id="boton" href="dashboard.html">
                    <li class="nav-item"><a class="nav-link" id="iniciarSesion" href="iniciarSesion.html">Iniciar
                            Sesion</a></li>
                    <li class="nav-item"><a class="nav-link btn-pink-custom ms-2" href="adopciones.html">Adopta aqui</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="modulo-apadrinamiento text-center py-5 mt-5">
        <div class="container">

            <!-- TÍTULO -->
            <i class="bi bi-heart-fill display-4 text-pink"></i>
            <h2 class="fw-bold mt-2">Módulo de Apadrinamiento</h2>
            <hr class="mx-auto mb-4" style="width:60px; height:3px; background-color:#ff4d88; border:none;">

            <!-- BOTÓN -->
            <button class="btn btn-pink mb-4" data-bs-toggle="modal" data-bs-target="#modalRegistrarApadrinamiento">
                <i class="bi bi-plus-lg me-2 text-pink"></i>Registrar nuevo apadrinamiento
            </button>

            <!-- FILTROS -->
            <div class="row justify-content-center mb-4">
                <div class="col-md-3 mb-2">
                    <input type="text" id="filtroAlias" class="form-control" placeholder="Buscar por alias de usuario">
                </div>
                <div class="col-md-3 mb-2">
                    <input type="text" id="filtroNombrePersona" class="form-control"
                        placeholder="Buscar por persona o empresa">
                </div>
                <div class="col-md-3 mb-2">
                    <input type="text" id="filtroAnimal" class="form-control"
                        placeholder="Buscar por nombre del animal">
                </div>
            </div>

            <!-- TABLA -->
            <div class="card shadow-sm border-0">
                <div class="card-body">
                    <h4 class="fw-bold mb-3 text-dark">
                        <i class="bi bi-list-check me-2 text-pink"></i>Lista de Apadrinamientos
                    </h4>
                    <div class="table-responsive">
                        <table id="tablaApadrinamiento" class="table align-middle">
                            <thead class="table-light">
                                <tr>
                                    <th>ID</th>
                                    <th>Alias Usuario</th>
                                    <th>Nombre</th>
                                    <th>ID Animal</th>
                                    <th>Nombre Animal</th>
                                    <th>Fecha Inicio</th>
                                    <th>Frecuencia</th>
                                    <th>ID Donación</th>
                                    <th>ID Solicitud</th>
                                    <th>Editar</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody id="apadrinamientoBody">

                            </tbody>
                        </table>
                    </div>
                    <!-- Paginación para apadrinamientos -->
                    <div class="d-flex justify-content-between align-items-center mt-3">
                        <div id="apadrinamientosInfo" class="text-muted small"></div>
                        <nav aria-label="Paginación de apadrinamientos">
                            <ul class="pagination pagination-sm mb-0" id="apadrinamientosPaginationControls">
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>

            <!-- TABLA SOLICITUDES (DESPLEGABLE) -->
            <div class="card shadow-sm border-0 mt-4">
                <div class="card-header bg-pink text-white d-flex align-items-center justify-content-between" style="cursor:pointer" onclick="toggleSolicitudes()">
                    <div class="d-flex align-items-center gap-2">
                        <i class="bi bi-plus-circle" id="iconSolicitudes"></i>
                        <h5 class="mb-0">Solicitudes de Apadrinamiento</h5>
                    </div>
                    <span class="badge bg-light text-dark" id="badgeSolicitudes" style="display:none"></span>
                </div>
                <div class="card-body" id="solicitudesBody" style="display:none">
                    <div class="table-responsive">
                        <table id="tablaSolicitudes" class="table align-middle">
                            <thead class="table-light">
                                <tr>
                                    <th>ID Solicitud</th>
                                    <th>Usuario</th>
                                    <th>ID Animal</th>
                                    <th>Nombre Animal</th>
                                    <th>Estado</th>
                                    <th>Aprobar</th>
                                    <th>Rechazar</th>
                                </tr>
                            </thead>
                            <tbody id="solicitudesTableBody">

                            </tbody>
                        </table>
                    </div>
                    <!-- Paginación para solicitudes -->
                    <div class="d-flex justify-content-between align-items-center mt-3">
                        <div id="solicitudesInfo" class="text-muted small"></div>
                        <nav aria-label="Paginación de solicitudes">
                            <ul class="pagination pagination-sm mb-0" id="solicitudesPaginationControls">
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <footer class="py-5 bg-pink text-white">
        <div class="container">
            <div class="row">
                <!-- Navegacion -->
                <div class="col-6 col-md-3 mb-4">
                    <h5 class="fw-bold">Navegacion</h5>
                    <ul class="list-unstyled">
                        <li><a href="HUELLA FELIZ.html" class="text-white text-decoration-none">Inicio</a></li>
                        <li><a href="donaciones.html" class="text-white text-decoration-none">Donaciones</a></li>
                        <li><a href="adopciones.html" class="text-white text-decoration-none">Adopciones</a></li>
                        <li><a href="blog.html" class="text-white text-decoration-none">Blog</a></li>
                        <li><a href="reportar.html" class="text-white text-decoration-none">Reportar</a></li>
                        <li><a href="acercaDe.html" class="text-white text-decoration-none">Acerca de</a></li>
                    </ul>
                </div>

                <!-- Redes sociales -->
                <div class="col-6 col-md-3 mb-4">
                    <h5 class="fw-bold">Redes sociales</h5>
                    <ul class="list-unstyled">
                        <li><a href="https://www.facebook.com/PatitasSolidariasChiclayo" target="_blank"
                                class="text-white text-decoration-none"><i class="bi bi-facebook me-2"></i>Facebook</a>
                        </li>
                        <li><a href="https://www.instagram.com/refugioanimal.chiclayo/" target="_blank"
                                class="text-white text-decoration-none"><i
                                    class="bi bi-instagram me-2"></i>Instagram</a>
                        </li>
                    </ul>
                </div>

                <!-- About -->
                <div class="col-6 col-md-3 mb-4">
                    <h5 class="fw-bold">Acerca de</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-white text-decoration-none" data-bs-toggle="modal"
                                data-bs-target="#modalPrivacidad">Política de Privacidad</a></li>
                        <li><a href="#" class="text-white text-decoration-none" data-bs-toggle="modal"
                                data-bs-target="#modalTerminos">Términos y Condiciones</a></li>
                    </ul>
                </div>

                <!-- Info -->
                <div class="col-12 col-md-3 mb-4">
                    <h5 class="fw-bold">HUELLA FELIZ</h5>
                    <p class="small">
                        Somos una organizacion dedicada al rescate, adopcion y proteccion de animales en situacion de
                        abandono.
                        Unete como voluntario o apoyanos con tus donaciones.
                    </p>
                </div>
            </div>

            <!-- Linea inferior -->
            <div class="text-center border-top border-light pt-3 mt-3">
                <p class="mb-0 small">&copy; 2025 Huella Feliz - Todos los derechos reservados</p>
            </div>
        </div>
    </footer>

    <!-- MODAL POLÍTICA DE PRIVACIDAD -->
    <div class="modal fade" id="modalPrivacidad" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-pink text-white">
                    <h5 class="modal-title fw-bold">
                        <i class="bi bi-shield-lock-fill me-2"></i>
                        Política de Privacidad
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                    <div class="mb-4">
                        <h6 class="text-danger">1. Información que Recopilamos</h6>
                        <p class="small">En Huella Feliz, recopilamos información personal que nos proporcionas
                            voluntariamente cuando te registras, realizas donaciones, solicitas adopciones o nos
                            contactas.</p>
                        <p class="small"><strong>Tipos de información:</strong> Nombre, correo electrónico, teléfono,
                            dirección, información de pago y cualquier otra información que decidas compartir.</p>
                    </div>

                    <div class="mb-4">
                        <h6 class="text-danger">2. Cómo Utilizamos tu Información</h6>
                        <ul class="small">
                            <li>Procesar adopciones y donaciones</li>
                            <li>Comunicarnos contigo sobre nuestros servicios</li>
                            <li>Mejorar nuestros programas de rescate animal</li>
                            <li>Cumplir con obligaciones legales</li>
                            <li>Enviarte actualizaciones sobre nuestros programas (solo si das tu consentimiento)</li>
                        </ul>
                    </div>

                    <div class="mb-4">
                        <h6 class="text-danger">3. Protección de Datos</h6>
                        <p class="small">Implementamos medidas de seguridad técnicas y organizativas para proteger tu
                            información personal contra acceso no autorizado, alteración, divulgación o destrucción.</p>
                    </div>

                    <div class="mb-4">
                        <h6 class="text-danger">4. Tus Derechos</h6>
                        <p class="small">Tienes derecho a acceder, rectificar, eliminar u oponerte al procesamiento de
                            tus datos personales. Puedes retirar tu consentimiento en cualquier momento.</p>
                    </div>

                    <div class="mb-4">
                        <h6 class="text-danger">5. Contacto</h6>
                        <p class="small">Si tienes preguntas sobre esta política de privacidad, contáctanos:</p>
                        <ul class="small">
                            <li><strong>Email:</strong> privacidad@huellafeliz.org</li>
                            <li><strong>Teléfono:</strong> +51 952 225 506</li>
                        </ul>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-pink" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL TÉRMINOS Y CONDICIONES -->
    <div class="modal fade" id="modalTerminos" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-pink text-white">
                    <h5 class="modal-title fw-bold">
                        <i class="bi bi-file-text-fill me-2"></i>
                        Términos y Condiciones
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                    <div class="mb-4">
                        <h6 class="text-danger">1. Aceptación de los Términos</h6>
                        <p class="small">Al acceder y utilizar la plataforma de Huella Feliz, aceptas estar sujeto a
                            estos términos y condiciones.</p>
                    </div>

                    <div class="mb-4">
                        <h6 class="text-danger">2. Descripción del Servicio</h6>
                        <p class="small">Huella Feliz es una plataforma sin fines de lucro que facilita adopción
                            responsable, donaciones, reportes de animales y información sobre protección animal.</p>
                    </div>

                    <div class="mb-4">
                        <h6 class="text-danger">3. Proceso de Adopción</h6>
                        <p class="small"><strong>Requisitos:</strong> Ser mayor de 18 años, proporcionar información
                            veraz, demostrar capacidad económica y comprometerse al cuidado responsable del animal.</p>
                        <p class="small"><strong>Proceso:</strong> Completar formulario, entrevista, firma de contrato y
                            entrega del animal.</p>
                    </div>

                    <div class="mb-4">
                        <h6 class="text-danger">4. Donaciones</h6>
                        <p class="small">Las donaciones son voluntarias y no reembolsables. Se utilizarán exclusivamente
                            para el cuidado de animales y se proporcionarán recibos para donaciones económicas.</p>
                    </div>

                    <div class="mb-4">
                        <h6 class="text-danger">5. Responsabilidades del Usuario</h6>
                        <p class="small">Te comprometes a proporcionar información veraz, no utilizar la plataforma para
                            actividades ilegales, respetar a otros usuarios y cumplir con las leyes locales sobre
                            tenencia de animales.</p>
                    </div>

                    <div class="mb-4">
                        <h6 class="text-danger">6. Limitación de Responsabilidad</h6>
                        <p class="small">Huella Feliz no se hace responsable por el comportamiento de animales
                            adoptados, daños a propiedad o gastos veterinarios posteriores a la adopción.</p>
                    </div>

                    <div class="mb-4">
                        <h6 class="text-danger">7. Contacto</h6>
                        <p class="small">Para consultas sobre estos términos:</p>
                        <ul class="small">
                            <li><strong>Email:</strong> legal@huellafeliz.org</li>
                            <li><strong>Teléfono:</strong> +51 952 225 506</li>
                        </ul>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-pink" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL REGISTRAR -->
    <div class="modal fade" id="modalRegistrarApadrinamiento" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold">
                        <i class="bi bi-plus-circle-fill me-2 text-pink"></i>Registrar nuevo apadrinamiento
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formRegistrarApadrinamiento" class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label">ID Animal</label>
                            <input type="text" class="form-control" id="idAnimal" readonly>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Nombre del Animal</label>
                            <input type="text" class="form-control" id="nombreAnimal"
                                placeholder="Escribe el nombre del animal">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Fecha Donación</label>
                            <input type="date" class="form-control" id="fechaDonacion" readonly>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Hora Donación</label>
                            <input type="time" class="form-control" id="horaDonacion" readonly>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">ID Usuario</label>
                            <input type="text" class="form-control" id="idUsuario" readonly>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Alias del Usuario</label>
                            <input type="text" class="form-control" id="aliasUsuario"
                                placeholder="Escribe el alias del usuario">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Frecuencia</label>
                            <select class="form-select" id="frecuencia">
                                <option value="">Seleccionar</option>
                                <option>Semanal</option>
                                <option>Mensual</option>
                                <option>Trimestral</option>
                            </select>
                        </div>
                        <div class="col-12">
                            <button type="submit" class="btn btn-pink">Registrar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL MODIFICAR -->
    <div class="modal fade" id="modalModificarApadrinamiento" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold">
                        <i class="bi bi-pencil-square me-2 text-pink"></i>Modificar apadrinamiento
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formModificarApadrinamiento" class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label">ID Animal</label>
                            <input type="text" class="form-control" id="modIdAnimal" readonly>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Nombre del Animal</label>
                            <input type="text" class="form-control" id="modNombreAnimal">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Fecha Donación</label>
                            <input type="date" class="form-control" id="modFechaDonacion" readonly>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Hora Donación</label>
                            <input type="time" class="form-control" id="modHoraDonacion" readonly>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">ID Usuario</label>
                            <input type="text" class="form-control" id="modIdUsuario" readonly>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Alias del Usuario</label>
                            <input type="text" class="form-control" id="modAliasUsuario">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Frecuencia</label>
                            <select class="form-select" id="modFrecuencia">
                                <option>Semanal</option>
                                <option>Mensual</option>
                                <option>Trimestral</option>
                            </select>
                        </div>
                        <div class="col-12">
                            <button type="submit" class="btn btn-pink">Guardar Cambios</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="JS/codigo.js"></script>
    <script src="JS/apadrinamiento.js"></script>

    <script>
        // Función para toggle de solicitudes
        function toggleSolicitudes() {
            const body = document.getElementById('solicitudesBody');
            const icon = document.getElementById('iconSolicitudes');

            if (body.style.display === 'none' || body.style.display === '') {
                body.style.display = 'block';
                icon.className = 'bi bi-dash-circle';
            } else {
                body.style.display = 'none';
                icon.className = 'bi bi-plus-circle';
            }
        }
    </script>

    <script>
        // Campos automáticos para fecha/hora actuales
        const now = new Date();
        document.getElementById("fechaDonacion").value = now.toISOString().split("T")[0];
        document.getElementById("horaDonacion").value = now.toTimeString().slice(0, 5);
        document.getElementById("modFechaDonacion").value = now.toISOString().split("T")[0];
        document.getElementById("modHoraDonacion").value = now.toTimeString().slice(0, 5);
    </script>

    <script>
        // Verificar acceso al dashboard cuando se carga la página
        document.addEventListener('DOMContentLoaded', function () {
            if (!checkDashboardAccess()) {
                return; // Si no tiene acceso, la función ya redirige
            }
            updateAuthUI();
        });
    </script>
</body>

</html>